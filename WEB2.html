<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title> TRAFFIC RULES  </title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <style>
            body
            {   
                font:14px sans-serif;
                background-image: url('Background1.jpg');
                background-repeat: no-repeat;
                background-size: cover;
            }       
            h1
            {
                text-align: center;
            }
            center 
            {
                font-size: 20px;
            }
            img
            {
                width: 200px;
                height: 330px;
            }
            input 
            {
                width: 50px;
                height: 30px;
            }
            .crossroad
            {
                width: 400px;
                height: 500px;
                margin-left:500px;
                margin-top: 50px;
            }
            p
            {
                height: 80px;
                font-size: 20px;
                color: rgb(77, 11, 3);
            }
        </style>
    </head>

    <body>
        <h1 style="margin-top:50px;">IOT SYSTEM</h1>
        <h1 >TRAFFIC LIGHTS MONITORING BY WEBSEVER</h1>
        <div style="display: flex; justify-content: center; margin-top:50px;">
            <div class="" style="display: flex;  width: 33%; flex-direction: column ; "> 
            
                <center style="margin-left: 50px;"> FIRST CROSSROADS</center>
                    
            <div class="wrapper border -2 rounded border-primary" style="display:flex ;width: 44%;margin-left: 190px;">
                <img src="Tathet.png" id="Off1">
                <br>
                <div style="display: flex; justify-content: center; width: 33%;" >
                    <div style="display: flex; flex-direction: column; margin-top: 50px;">
                        <p id="r1" >Time</p>
                        <br>
                        <p id="y1" >Time</p>
                        <br>
                        <p id="g1">Time</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="" style="display: flex;  width: 33%; flex-direction: column ;"> 
            
            <center style="margin-left: -10px;"> SECOND CROSSROADS</center>
                
        <div class="wrapper border -2 rounded border-primary" style="display:flex ;width: 44%;margin-left: 160px;">
            <img src="Tathet.png" id="Off2">
            <br>
            <div style="display: flex; justify-content: center; width: 33%;" >
                <div style="display: flex; flex-direction: column; margin-top: 50px; ">
                    <p id="r2" >Time</p>
                    <br>
                    <p id="y2" >Time</p>
                    <br>
                    <p id="g2">Time</p>
                </div>
            </div>
        </div>
    </div>

    <div class="" style="display: flex;  width: 33%; flex-direction: column ;"> 
            
            <center style="margin-left: -70px;"> THIRD CROSSROADS</center>
                
        <div class="wrapper border -2 rounded border-primary" style="display:flex ;width: 44%;margin-left: 130px;">
            <img src="Tathet.png" id="Off3">
            <br>
            <div style="display: flex; justify-content: center; width: 33%;" >
                <div style="display: flex; flex-direction: column; margin-top: 50px;">
                    <p id="r3" >Time</p>
                    <br>
                    <p id="y3" >Time</p>
                    <br>
                    <p id="g3">Time</p>
                </div>
        </div>
    </div>
    </div>
</div>

<script>
    $(document).ready(function(){
        updateLights();
    });

    setInterval(updateLights,1000);
    function updateLights()
    {
        // Yeu cau sever gui file GETDATA.php
        $.post("GETDATA.php",
        function(data)
        {
            var f=data[0].First;
            var s=data[0].Second;
            var t=data[0].Third;
            var t1=data[0].Time1;
            var t2=data[0].Time2;
            var t3=data[0].Time3;
            var mode1=data[0].MODE1;
            var mode2=data[0].MODE2;
            var mode3=data[0].MODE3;

            // Hien thi den va thoi gian con lai
            if (f==1) 
            {
                document.getElementById("Off1").src='Do.png';
                document.getElementById("r1").innerHTML=t1;
           
            }
            if (s==1) 
            {
                document.getElementById("Off2").src='Do.png';
                document.getElementById("r2").innerHTML = t2;
            }
            if (t==1) 
            {
                document.getElementById("Off3").src='Do.png';
                document.getElementById("r3").innerHTML=t3;
            }

            if (f==2) //
            {
                document.getElementById("Off1").src='Vang.png';
                document.getElementById("y1").innerHTML=t1;
            }
            if (s==2) 
            {
                document.getElementById("Off2").src='Vang.png';
                document.getElementById("y2").innerHTML=t2;
            }
            if (t==2) //
            {
                document.getElementById("Off3").src='Vang.png';
                document.getElementById("y3").innerHTML=t3;
            }

            if (f==3) 
            {
                document.getElementById("Off1").src='Xanh.png';
                document.getElementById("g1").innerHTML=t1;
            }
            if (s==3) //
            {
                document.getElementById("Off2").src='Xanh.png';
                document.getElementById("g2").innerHTML=t2;
            }
            if (t==3) 
            {
                document.getElementById("Off3").src='Xanh.png';
                document.getElementById("g3").innerHTML=t3;
            }

            if(t1==0 && t2==0 && t3==0)
            {
                document.getElementById("r1").innerHTML="Time";
                document.getElementById("r2").innerHTML="Time";
                document.getElementById("r3").innerHTML="Time";
                document.getElementById("y1").innerHTML="Time";
                document.getElementById("y2").innerHTML="Time";
                document.getElementById("y3").innerHTML="Time";
                document.getElementById("g1").innerHTML="Time";
                document.getElementById("g2").innerHTML="Time";
                document.getElementById("g3").innerHTML="Time";
                
            }

            if(t1==0)
            {
                document.getElementById("r1").innerHTML="Time";
                document.getElementById("y1").innerHTML="Time";
                document.getElementById("g1").innerHTML="Time";
            }
            if(t2==0)
            {
                document.getElementById("r2").innerHTML="Time";
                document.getElementById("y2").innerHTML="Time";
                document.getElementById("g2").innerHTML="Time";
            }
            if(t3==0)
            {
                document.getElementById("r3").innerHTML="Time";
                document.getElementById("y3").innerHTML="Time";
                document.getElementById("g3").innerHTML="Time";
            }
            
            if(t1==0 && mode1==0)
            {
                document.getElementById("Off1").src='Tathet.png';
            }
            if(t2==0 && mode2==0)
            {
                document.getElementById("Off2").src='Tathet.png';
            }
            if(t3==0 && mode3==0)
            {
                document.getElementById("Off3").src='Tathet.png';
            }
        })
    }
</script>
                
  
       
       

    </body>
</html>